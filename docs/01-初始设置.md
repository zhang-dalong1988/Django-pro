# 第一章：初始设置

本章介绍如何正确配置您的 Windows 或 macOS 计算机以进行 Django 项目开发。这与《Django 初学者指南》和《Django API 指南》中的设置指南类似，如果您已经熟悉命令行、安装了最新版本的 Python、知道如何创建虚拟环境并使用 Git，则可以跳过本章。否则，请仔细阅读以确保您的计算机已准备好进行专业的 Django 开发，并在本书的其余部分取得成功。

## 1. 命令行

命令行是开发人员经常使用的纯文本界面。它可以追溯到鼠标和图形用户界面成为标准之前的早期计算机界面时代。在实践中，有多个术语用来指代命令行：命令行界面（CLI）、控制台、终端、shell 或提示符。从技术上讲，终端是打开新窗口以访问命令行的程序，控制台是基于文本的应用程序，shell 是在底层操作系统上运行命令的程序，提示符是键入和运行命令的地方。最初很容易被这些术语搞混，但它们本质上都意味着同一件事：命令行是我们在计算机上运行和执行纯文本命令的地方。

在 Windows 上，内置的终端和 shell 都称为 PowerShell。要访问它，请在屏幕底部 Windows 按钮旁边的任务栏中键入"powershell"来启动应用程序。它将打开一个具有深蓝色背景的新窗口，并在 `>` 提示符后有一个闪烁的光标。以下是它在我的计算机上的外观：

```shell
PS C:\Users\wsv>
```

在 macOS 上，内置终端恰如其名地称为 Terminal。可以通过 Spotlight 打开：同时按下 Command 和空格键，然后键入"terminal"。或者，打开一个新的 Finder 窗口，导航到应用程序目录，向下滚动打开实用工具目录，然后双击名为 Terminal 的应用程序。这将打开一个默认为白色背景的新屏幕，并在 `%` 提示符后有一个闪烁的光标。不要担心 `%` 提示符左侧的内容，它因计算机而异，可以稍后自定义。

```shell
Wills-Macbook-Pro:~ wsv%
```

为了避免围绕每个操作系统的不同提示符产生混淆（Windows 上的 `>` 和 macOS 上的 `%`），在本书中，我们将使用 Unix 提示符 `$` 来表示任何命令行使用。当 Windows 和 macOS 之间存在差异时，将列出两个命令。

有许多可用的 shell 命令，但大多数开发人员反复依赖相同的少数几个命令，并根据需要查找更复杂的命令。在大多数情况下，Windows（PowerShell）和 macOS 的命令是相似的。例如，`whoami` 命令在 Windows 上返回计算机名/用户名，在 macOS 上只返回用户名。与所有 shell 命令一样，键入命令本身，然后按回车键。请注意，`#` 符号表示注释，不会在命令行上执行。

```shell
# Windows
$ whoami
wsv2022/wsv

# macOS
$ whoami
wsv
```

但是，有时 Windows 和 macOS 上的 shell 命令完全不同。一个很好的例子是向控制台输出基本"Hello, World!"消息的命令。在 Windows 上，命令是 `Write-Host`，而在 macOS 上，命令是 `echo`。

```shell
# Windows
$ Write-Host "Hello, World!"
Hello, World!

# macOS
$ echo "Hello, World!"
Hello, World!
```

大多数 Django 开发人员不是命令行专家，他们反复依赖相同的少数几个命令。在本书中，我将每次提供确切的运行指令，但如果您好奇，可以在 ss64.com 找到每个操作系统的完整 shell 命令列表。

## 2. 安装 Python 3

确保您的计算机上有最新版本的 Python（撰写本文时为 3.10）。

### 2.1 Windows 安装

Microsoft 在 Microsoft Store 中托管了 Python 3 的社区版本。在屏幕底部的搜索栏中键入"python"并点击最佳匹配结果。这将自动在 Microsoft Store 中启动 Python 3.10。点击蓝色的"获取"按钮下载它。

要确认 Python 已正确安装，请使用 PowerShell 打开一个新的终端窗口，然后键入 `python --version`。

```shell
$ python --version
Python 3.10.4
```

结果应该至少是 Python 3.10。然后键入 `python` 从命令行 shell 打开 Python 解释器。

```shell
$ python
Python 3.10.4 (tags/v3.10.4:9d38120, Mar 23 2022, 19:00:18)
[MSC v.1929 64 bit (AMD64)] on win32
Type "help", "copyright", "credits", or "license" for more information.
>>>
```

### 2.2 macOS 安装

在 Mac 上，Python 官网上的官方安装程序是最佳方法。在新的浏览器窗口中转到 Python 下载页面，然后点击"Download the latest version for Mac OS X"文本下方的按钮。撰写本文时，那是 Python 3.10。软件包将在您的下载目录中。双击它会启动 Python 安装程序，按照提示操作。

要确认下载成功，请打开一个新的终端窗口并键入 `python3 --version`。

```shell
$ python3 --version
Python 3.10.4
```

结果应该至少是 3.10。然后键入 `python3` 打开 Python 解释器。

```shell
$ python3
Python 3.10.4 (v3.10.4:9d38120e33, Mar 23 2022, 17:29:05)
[Clang 13.0.0 (clang-1300.0.29.30)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

## 3. 文本编辑器

命令行是我们为程序执行命令的地方，但文本编辑器是编写实际代码的地方。计算机不关心您使用什么文本编辑器——最终结果只是代码——但好的文本编辑器可以为您提供有用的提示并捕获拼写错误。

有许多现代文本编辑器可用，但非常流行的一个是 Visual Studio Code，它是免费的、易于安装的，并且享有广泛的流行度。如果您还没有使用文本编辑器，请从官方网站下载并安装 VSCode。

一个可选但强烈推荐的额外步骤是利用 VSCode 上可用的大型扩展生态系统。在 Windows 上，导航到 File -> Preferences -> Extensions，或在 macOS 上导航到 Code -> Preferences -> Extensions。这会启动扩展市场的搜索栏。输入"python"，这将显示 Microsoft 扩展作为第一个结果。安装它。

要添加的第二个扩展是 Black，这是一个 Python 代码格式化程序，已迅速成为 Python 社区的默认选择。要安装 Black，请通过转到页面顶部的 Terminal -> New Terminal 在 VSCode 中打开终端窗口。在页面底部打开的新终端窗口中，键入 `python -m pip install black`。接下来，通过在 Windows 上导航到 File -> Preferences -> Settings 或在 macOS 上导航到 Code -> Preferences -> Settings 来打开 VSCode 设置。搜索"python formatting provider"并从下拉选项中选择 black。然后搜索"format on save"并启用"Editor: Format on Save"。现在，每当保存 `*.py` 文件时，Black 都会自动格式化您的代码。

要确认这是否有效，请使用您的文本编辑器在桌面上的 ch1-setup 目录中创建一个名为 hello.py 的新文件，并使用单引号键入以下内容：

```python
# hello.py
print('Hello, World!')
```

保存时，它应该自动更新为使用双引号，这是 Black 的默认偏好：`print("Hello, World!")`。这意味着一切都正常工作。

## 4. 安装 Git

最后一步是安装 Git，这是现代软件开发不可或缺的版本控制系统。使用 Git，您可以与其他开发人员协作，通过提交跟踪所有工作，并恢复到代码的任何先前版本，即使您意外删除了重要内容！

### 4.1 Windows 安装

在 Windows 上，导航到官方网站 https://git-scm.com/ 并点击"Download"链接，这应该会为您的计算机安装正确的版本。保存文件，然后打开您的下载文件夹并双击该文件。这将启动 Git for Windows 安装程序。在大多数早期默认设置中点击"Next"按钮，因为它们都很好，以后可以根据需要更新。但是有两个例外：在"Choosing the default editor used by Git"下选择 VS Code 而不是 Vim。在"Adjusting the name of the initial branch in new repositories"部分中，选择使用"main"而不是"master"作为默认分支名称的选项。否则，推荐的默认设置都很好，以后可以根据需要调整。

要确认 Git 已在 Windows 上安装，请关闭所有当前的 shell 窗口，然后打开一个新窗口，这将加载对我们 PATH 变量的更改。键入 `git --version`，应该显示它已安装。

```shell
# Windows
$ git --version
git version 2.35.1.windows.2
```

### 4.2 macOS 安装

在 macOS 上，通过 Xcode 安装 Git 目前是最简单的选择。要检查您的计算机上是否已安装 Git，请在新的终端窗口中键入 `git --version`。

```shell
# macOS
$ git --version
```

如果您没有安装 Git，会出现一个弹出消息，询问您是否要将其作为"command line developer tools"的一部分安装。选择"Install"，这将加载 Xcode 及其命令行工具包。或者，如果由于某种原因您没有看到消息，请键入 `xcode-select --install` 直接安装 Xcode。

请注意，Xcode 是一个非常大的软件包，因此初始下载可能需要一些时间。Xcode 主要用于构建 iOS 应用程序，但也包括 macOS 上需要的许多开发人员功能。下载完成后，关闭所有现有的终端 shell，打开一个新窗口，并键入 `git --version` 以确认安装成功。

```shell
# macOS
$ git --version
git version 2.32.0 (Apple Git-132)
```

## 5. Git 配置

一旦在您的机器上安装了 Git，我们需要通过声明与所有 Git 提交关联的姓名和电子邮件地址来进行一次性系统配置。我们还将默认分支名称设置为 main。在命令行 shell 中键入以下两行。确保使用您的姓名和电子邮件地址更新它们。

```shell
$ git config --global user.name "Your Name"
$ git config --global user.email "yourname@email.com"
$ git config --global init.defaultBranch main
```

如果需要，您可以随时通过使用更新的信息重新键入相同的命令来更改这些配置。

## 6. 结论

Django 是任何想要用最少的代码构建现代、强大的 Web 应用程序的开发人员的绝佳选择。虽然配置软件开发环境并非易事，但您现在应该已经安装了 Python 3.10、安装了 Git，并配置了现代文本编辑器。

在下一章中，我们将学习 Docker 以及如何为任何计算机配置 Django 开发环境。
